language: python
python:
- '3.6'
sudo: false
env:
  global:
  - PROJECT_DIR="$PWD"
  - DRIVER="Remote"
  - secure: AFWAM5i9hRx5rgZR/kY3/CNY2ycBe+ZqkOn5LhnpHgZdg6YFnvyYjh3pRWo6eMsbMlltA6viUFXW15IzMbpbaxmiRMmjR7paAnF0fCMuCEu428al7Uy4L/b9TB1Hswq46i1zWNd+OsCI0HYDZK8qih6OnYPzUpDpaoeld9iB3z7Be0f4jHLZDL0Lvz/gTi6JKSNG7Q8FZ0cUCQrTfvyHJiyhdtJYGYrQWeJ+mTvgBVogRBCeaZ5FN6eZMrpzQgX2CaawVH8IxxrjDCQ45blrT2y0pH7F8x6LvrbDOkrOpQ6HjAlATqFfnb1fpLTcgaH93R3QB3HoTjy5giaGniSIpSZ+c5nNBShxpilm6HSjsFIYVaCbuQQwbBZVwOj16px9NAGWl75pkXmf6tPLnE41/vPF2cOiM6L/TDNOT/Ol5nccoWpSLUNJbBPLN6CHXetrSyUHJZiUTcXhdl6jKKbOcbhgwDUFvst+pdva7qiSm9fB4OXqdyJsO4l46QHEGBCTSussJz3UU+ByCBZeRUjuSHdQQLL9XLlP6iCsRz9SD+0lLSQ/5YfcQs/2r7wPvhz9l7kumlIphxKp+Ga843G/dpj2Miny3j/+BWiITcSHXNmybM/vdIKgZq25NVh5Hug/lmx3iwcDVFs4JuF4C+jraj5KtZX0Jvzx26sbR/u6EJk=
  - secure: neG5lhBeHGMU+Ui2A1jKLMwRzRKq9yHN1ve5rVEObuV5RLfgUz6oKGlKF/L4hlDseyZk/kCd9vkTdEnKkq+5sEao35wflXf+wXP9t3jk3+9xujFLUH7otYDrkhg+QkVeCTqGI3tbr2qeT6dJw9YoaEJOncgcPx8Kd3t9JHex54RmoVmF8c5ritgm7JU85Szso8TCF9p99Os1yiin6hVRUhbT5ZmehS0xGP3X737JyvzwNw5BIgIYTejymaIejd91NwgV9uZkuDTwzRx4vPpMgeoCpFCjO81v94tIlMvykCWEwKysYuAuggm/h77Hj7HzlE/1nPTgttPjsqoEs2wDCh5JmpWoVLYIhVmAYUgiHWVXdGyWuBHbLP4QSqP4+8V/l2+pblt68FmJq4VZ9OnCLzVDbAXGMtm6DNWBOUHm/vsToDIXi7EcEZuMndfaR3ymP0PZLj8ZSgpINVcXHsamEpMs/PmYcZlvrSOo9SlZDQ1DsXRDuFQa+fn1oYmVtErTt/WNrtRbNyNIU5AHgXxiZhgAgIK6a9llM/GaNN8AKlkoBwTS+mlCdm7THC6CbABtaRmGaXCrGzPiw+YzGwKtcuukoUyr/8bPdEyKb08KA/qSOO8BrDIF+M+3L5k6ALECK+WQzcXyFXO/yjk/S4tzQr4lySODfuav1UEHvvtCiJs=
  - secure: Pa6wPOL751d+C2rEBCl+lLUopVq1aF/W2c7QRqxuXVMVbqcSMCRp9SzdJ24iRYPAkNs45DHBHdWkFUPER2195RmxnYh1+aJIFEQxp0BW+Nu8GCJQlzuqaWylJpLTEYZb+UNFu9Lh1WlhypLPgg4kNZxoq1wuK20SRXJlZZUvveGcMjOTNkb0pmgMB+IXEsnp70u8i7Qc+bPpHcY96J2LMlx1QIfYA9vA2HfdQf2Jsk5jGUjgYiMgjFpN3/76gQyQS+xwh7q7VKNDdvR6o8wbsekGkqutAvPFELHWUcgsRU4BcYZPmUmLQl3sXhxhXfnEaGbTu6rHn9vzhijDD9/EB+PzOAKmiWRBEcktCY6nvouaGmAf92C4bGG2tLB55d4GsyvbjczJyKocM9YRMNLaAT6g3lMbqUCBetJR5EvvV46Hng023HayboSuihL40XupYw4EcMe0+++pYELOQuRuUmaAM2ZaOIPx+DQkJhnzylM500Lz1fNWyLzNFqL4KdGt90lmzwAoNhRDOHiXZnEBES0wIrlWyL/sQSz4iiCPwF+IqSNfeejbYA0Xo3C25yxFGMN7MSgm3H9w1BgFnvghtJYtZWwTX7JBd22L3ybUaVNxo6NOBqIGSsU8Io7wW/xONkdRaMpKjsFuUhxl1uT15gMDNAYSw4b1+D5ubvsFVl0=
  - secure: odmixoUuom7tKZiGh029YeiJsoDkytU1ci5LXJR/KB43ciuoNaiFo6/QVZLcxpzuEqmgDKkfUPq22+h/1PJmetNv/49gWgXTvM1x8vsZX2OA2q4tVdsxhlwSKKRbmlV2Y1+p7AQr3Gj2gz8mIW3Dat7hUBr7bTQr7jB4k2byroHEQ/6WnSrYkIAtnUNPZPB6+e8kAiG3Gm91PJrT4J7NQt0vZGmuxYdsGrvzGvERjuRGl92CS7MwWG1+pEwFe2TkVxE7L1RU2oUIEvXRHuvWinHBRf0uwpBVHWx1F/PUclr/0iBjONYttG4zi5NHs01gUDFUBk4IypodY3fRavXq97+imt0iJ9b77h/Fb+nMuNOjubV1MebgLA+SxdLdPK8xoFAmbOlD9z4ICqVBj+16nxbvbYy4LJFq5Fx+LU8gCSh8cy+ln7vK1T1jsmQN3D4CZUxoPe6sHzehVQ3QWDy6VhcE6w3qMJt+/AO3QFlOKn1obTavGMAHEH6DkzaCRnnJ9lZ+7KVZAA1PE/g11r1MuseWm6g287ryoO+tCxMN8lyOTGfIR+zs0Py60PSq+J4ANu6SemLsqCAj8w0i/6n6Er0hR9MO7iJ0yrwrd4C7D62LEWllQPwfGktjpI2BrKMrc3xOilsVljvNWD9kLJhtOh5UzFnBZz9uijRSFrV0ock=
  - secure: C6MghQt7q2yk8mw+pQUhKbvN/YF2lUdUquKrdQv2GbIr7j51JIAOwIYbU2UFn+Aj0ay+xSU8Y9GuOlFmzle8GpFQxnVhtXwB/2iYLsQMYnau0YQr1xjNz9TODwJF0RCdFz2xLeIPMV/x9sJtddb43/Q4e6IqE4FgFctrHvUfU6nsI/g7xH8veU+Ai5Q+bk6I9maIVw6x/sD9/VHxuZ/eGGiBClYcYUzxEsgGC42IhEuCWo+djwDtt+KnD5+y0rlZ8xWbdmd3jqeLvn773hrsaziJQ8gInDk93uFH0J4PImTcSkhMSIHJxJE+QbdHxcy5Ua0mUouft6KGjIBKGvoNm5j79UtSAJh/pZLSLdDrx7N7Dz9CF9VBw8+KfwkKgKqq+YRO9WyrK/cPLaXIL2urs6YN09QwME86n0vi4dLqrS4zGDnGllx1P9EZfYcCZAf1BniVmOnqU36NA9quREE6rJgNun9QsTX17GNUsOFxLz3bGLVHpqmd0Zyh3ry4hrXuo1/BU82sF9DUM0BVG90nzwf5+aAJPoY2yxeqSYHwNy28Ebk5CFuI7AdoluffS3x1yUpHjxgfvGL9HW02aq8mLtZttfYk/a65U49dilc01qLvQaSkrV6ac7d9Nxez0jGmXG7RzBwg9DAV/38Sk59UFGSTPddAmkXKcBQZJX35nik=
  - secure: wfWXkSfmXAV+ZHW8cfUxTo8qBOcvkvSJ/gV/MEVdYOW3XSXN4HNZvkTfHfaX0WMBFyxAipHGg7E15izxqNu76JjFY2gZunVL1EupUc1w1t3LfpecTaWng3KPx12yHJjoHWoaO0Quy3w4IvlMc9TUmfpRykXFTCQ15bQ59GKrWkWvp2fjCxyxNN3dXkCY/CnvJwrVBkuB1pPo5kIQzbbasB5XjDv70Lp3bf/KqcZUqYOx0uPDFFiJEs7ZjJmr3o3Ue8tlPtmu+EN8aL0e5AAqoMbPrPgBx8thZNgFdNt0kuMWk2jj784BNjZPYTzOyys+i+QONcUn0GGJxfrMj7iKGgF8u4XeH08yM/tjHTKfXUQiIwxf8TQT33E9RgkDV7twlLyh34IghMLJf+mgvbX8KIFDKZGqsYPmuN9p2tJF++gE4CQRN3BrakO+3B4XM7E5a7tw+Kc3sNLG31i+xal5XAwG3gJjeAiKwrnm4JorT4sD3Q28BP2warO0UkhmAkdrib4PI+E5ZFs0KcAc/YLMfsiSSLNuaP2+kh5FhgDEq76b/FPT5fuEkbG0UjMLYvScUc9G2rWEwiFZjPA3NomFJSsSjbpEI4aolzUAjbyZYuiFt5e1GwssyXziUdBUxIY0oG+liJJ7e2FehkNKO4uhQ7OFTJMKOkTexS2M95kPJhE=
  - secure: Xi+ANYJjP3b1XNLK63+fviVD1o6Gazn644N5J8LvQClQ6T9q6n4HPFXwtJG5s+ZADxTUqvFdxwFAPu7RgDIVaMNzY//FlLfxYjMl8oLP/sUqMME/qT6RZiYNRMA6xpYIPCjah4VWc/x+NOwnb1dOgCKDwA3j1Pw+FHPaENokn6zsmES6ED5+s8G5TAsJn/3a8N1dHQ5dErZz344KsdsjqpG5tHqKDobX6u3TtAgZ6L5aUaf46azL4NsNe8CsNofggnfHn+eN2BRpPMMj9zYQq147SThF+a3D/xPmVVdho5p0Kw7hAzRJyv5ng+OLR4UhSRJhmGZ1PbU5jmVfBJPlpZtOj/Lu2oT1kRGPscyU+LITlDN5R4u9G0dZNx/ZgJPNaQt47RT7dQ/w/nvrdFUekdNs5G835E0znIKLorvsyZNdk8xrg+CDrbDQjnij5iP7SoUXpP2ir67y45sZKBWH6YqrQfHth9MnBk6/fu7Cn595rMUVEAVqZ3NGV4eWskdUbn/5lhhEjKXIQ3xmDnzjWd0UwLcNp6VeyQVycKoxKRj92LiOTyoK2U31uGu1Gdqha/FhgKmDTI+4YRYb019G0AUe0MS/KWh+W5yCAyWSbenJ3UXX2FQexWaVcGYFUDAI3qs32pkTOyWhfq2t4TNI9uDidKLxQoTgd6gjQfmql3E=
  - secure: DvslOC7blgqsAAzgxRPffRtsPTTDAMP34mt1Q9xWAlL0iwcuElkaPPZvauRJaH+AhhO2fpJITa1sTyG2gaEctub6JNdrPQwza1hGXJlrgkU6OwitLc6dhn/1/CO3VbIOSJ8F1cuvnxjgTeffdgd7tVgkjvXJykCItSeMEkR6sHFPWjpq+bivjhXoJpdO8w7YWXAxnobmCi0N1YZs1ZtP5MzoM7bxrbLbaHawd5fTDvlqMb3yzibKS79h311KNOzvZzX5TDEQ11SxKgwN1kuneeYEUDN+yd9aQOOOOsctwGa5ehSNxw2CPUW3GfwANKJ8+QCgTs3VtdJLLPVBCAjvhtHEURBNme7Gd3L0hOR43h6+ngMsTiTkUBJU6DWB6mV/AxNIu8dTEI4FR5nwb0t4iEN8TmFNHrGpQf1Y7Omm7lDVLZ35JLPSvSNdjBVnZ0VxOQ7aNf5jmXTvLh9uIL0DJzpKViQ4Uaq26HsFz1gqRlOoHWnmBD3YHjEYBj/k8L8ZUByU/JhfKPw+KX6HkT0mH2m8W0U3EaqUq5SnYfSlxsdsSObW608+SltAJGIgC89DYMptlB+uJ83vLoX7ZTH9wWUV6d8CaiaXdQhdCqPkYBR8midpp6o1WVQ3UbTAGsRUdCKmpORMiE+rAsW/BzQG2wftBPgthoD+7V4LKyThuEE=
  - secure: Ja33XOrs9TNhECb3YmxUHQfiHwbkzZccSZfD4vT6/btOmGruzUp9ruYbZFnpRGgKrc08J0hfdvKMYwb8BwuFxzNgFGHOObKyOrpfIupQGGJiPtiqGnyI4dLn8VW9GzQWhAeXK/vAo+YvtP3L1rlJMHv3g/UJs+U/+okSkC6J6QmDZisFVo727v6Jiusq0AxCxh11CXEXZmxrugA+oXoCuUtTW/5t+2+KbULBsZAGoAXOdTejuv7Fz0NdIW7csexJBrf+IrusFcILb2AML1k1iBiOP3oJBq7EXOcaKiO9DMc0cONkf3Zp4a5nOiIlxise7QZ+fcSPtytjoCgF5P0cgF2HF2gHyXvpWsAS8KVBhT594xGVZmCJ/stWqS1kmL3+pH458l9rIS2jhQIRD1dXkibaFwbNnqBnyu5K4F7UXdbuSNN+o5/6GckJwQkiPefGhQLvKjCn1ppSiwM31cBw79LtxTET1OwR9zHzMeHBU8r33ZU/yP9NFITN/1Mqba2Di3zF5mlMBuXisibm6546ZK52YgaZV/CH8OGjZwGoLHcYhTI/fsU7M6vtfc0gxcQFFyC9avwRcgV1FQrSQv0LqNrsJLPpRrS2t92rPYsNbysKdPx39VTG8vbsILsEGVMirmbm2GpgRziwvjYbumtekzl/i4LVPERFh4jQYlHSCaw=
  - secure: Ae5efbkZKiehrv++99uKNxGEtBODNcVVosWPAHs7fTkMkBig1SXbwsNS4q0cc61rbzhp0GWpgXEPGPWuztdK3mxz/OlxxF1SzfeEpPqUOPv4p49NvUv+hGoeOLUUZZaKUfyTl8Jf62juS8TLc9NynlIboYvAPsUEBmbBCZQ8aA9GDV0m0cDZqW2Cp+MzrlQjwLfwwOe1118fdC3bDcEVxAgqzX3YrNev+e5kNujAWXcTm9NaeqwMsBoENSYaMWhjPTqGZIdfjltX5AXnbfl/TuCXJi+OQ9CqiP+w/sRbLI/sTBjEvtx//UP1gvH5KUebQeGZyE0fzOoJhTT6JENE4rHJemjT+mYhNIXJjrsDEteFrquRv1QZ5CI7eg41wuxzjOeCnU5QFQBgCR94OQgA36kUxg/tOpwzmkArAXe/k6ohvHmX3/HDfGFkkNkqIfTRPZ8xNfESjPqYMO4hqi75UxmBE72AXAmD6Vh80SSmRDEArPDcimFFCZpifEuAT4fxpdwOiKAR+yJfPL9BR/YnWpaJGKtqflEdjgpkG7flKStBj3iHuY80O6AhSgGdZrLJdOnRC0wcvQrj0Lg+CQiUxD/8QtRCT/ppKoS7fA/cWIDify+CCWyU08LRPG9X0P4cn82GQ57i3N88DgwwslAkF+0xwFNBAyEDIIfeyQbsV/0=
  - secure: Hk6zGDMXfNgbrksYpbTOb26O24MhUmsH9C9vvsBGjiwpUubpjOzcWKoNZ40HPXjDUAPDW84tfGDiFr88gsfxIbcB6IoR9weuCI6RItQegHMXCxxSLnZgIOPoQbrl8IkiyDkLuej13yGdRYG5Q4HuGlVmvGluhxAa2J9+bkLdWbhxTJmRw9KMCfWJAcP3rI0EPkhfa+oqCbMZMZB1uwvYuMIrLK25PwI35e/NFuTInJ30QlSgLHdN4pP37f+FXxQW0ffxtEFdjIONb2ZwOXGPRWG2eW0s+w6S7oBwxRw0XQnwEG4PU700y0NNibsCFrXswkV4rSXZ+KebTXAzrCFefss8DV/AKQIRSv5tfqyGCycGlVPmqUBaTaSaXiZSEHEKmn7ZZq3STl6yJZnrsVSuQ0Cx4J2m06ZchBAL4cTDNy1FirTUoB/aRKEXpRweud5HrgVp9OdKTjUTfQLfbkqdB9MBUOUtxvgSJsbl1Ci4ikmT1fJp5YpqZmdK4nUnUV0yPTvelxHd+cEoRZVpu8293Vn8v/eAVFxYPotqToHzJYJFkUQPajqvtHN7yo+yPrsksaaNwYPnpY5DqiMv8X6tLf8Qcn0fbn32imMhAqaPdyUZ8rT+tM34BhzdiVHuf2yM56Hw1jUUrn2sm2OpYgkGPnbgTXCQD391LVdeJdrO6wQ=
  - secure: Ebmw6g99P65PAQgbPnx24wSME7I9NC6JcZ0greZuGyS5+WfjA2ga9T8FLNJ4NnSBUhypOwfL2E+pwL4+Wg0ezkqv0ruCtsvY+LjTphwKCWkYnmf5iYI+0RRi0cUucbHF8gcetMR8W1CKyvpnT1MZKxCS7EMJ1B7SIend/ShRRo6KKyzykUliQF6v+8aebjfp7zE9D/hsURu9UWDblM16KtsfmYCHVuYDvXfHovQq8oIXBM0YOn+sluZhnbmIzhToEGXbyMteTgEGWsCbHvQjf8v9GrvkyGLbH/jbLUXjDGpW8wx+dT5iTOWxrnLIopdixN2vuBQORX16soE4y82aTle3UFKWcCUJQToDS0lLPXaHzjSVIaMdq59gHNniTH7Kimp7I+VV6O2PjF+ae3ME5RIEvbnCqqFF8RNhBc0DGP7mEl0mcTfiFWDuwWM0Mlb889aHl10nKJWZ07fpe6HdqeSESHY9OOSGvlky2F3XlyN0Rg++kVaJUXPd2gxkQ6vhvH6SK2TNgc58CEC0Zj1iC2aQ2Op4xp05t1yA47IqGQ3kNGM4SJKLDYaUJLLfFpR+pxoiSgmRcSUpYzWhe+ZwO6uo1eYay7nhR7Q2nvHaumVvpCNXh33gdQ1PDPLVmUqEa3HEWvvKBXWQ1Mcbxmv1BygwrawrJXJBKBYAUVZ2brs=
  - secure: p4YHBqYM0LDI11n4jB6BApPw3KWN3WQY2P6v2HZPbSszAP3+yeB2ULYDjF2vhkFZP6apKPGlp0oeDqWHDFhJ2mx06xoMAUoj1WWkS18DTdepXjmkopeR6BFo6lR4b+ZeEAE35PeexWOsntERqlo9u8aJ23JUQ564ofdOgBAJIuZZo8ueFehbcDnNrnvC77jX4GTkhEh5Lwb7bz34Zg39mlIn8yLZG9yd93qrA1B6FX17n0fTBDbfbRrx10mPDLv9D9ErTXWskpllmhLS0hYAqE0Ygl0bkbdGA1zTuFcTXTa3RU+Sv1grQq6cXc/lVJA40qOPSqL80L0XLvr/W6+FcQAb8S2Y4Wan/CayXKruenNc08Vld7nR9o7yNR6GhqdD1VYK++uQOudqh+ZMAjuLt9U3r18o36RiJXsS5mSwqNN/UlYkBKEulcXGFogvAhCoA5Mhe+1MB9K/voHJAUpVADOylwFCqa2sbpJQj9l77jug2J8p6wP5nwbPW5x3c2T8cwZvfszNF1dUQy1ZgDBWimQXLTmkewwpKOkZJDJfaz2hnGP5yZhKyFE5gQ6GetkYQjwezmiEq6IOnCsrvtk17uQjONI5p2a2xP6CM3ln75G8ytI2fKRMu1Xz46Uh8/fQvvbIn5SnvhADIL0aB9qlVreQ9y6Y4vzmq2ZVaVbx8Ww=
notifications:
  flowdock:
    secure: sif5bHBKyFmBQIIvuh3WLAN+V7cV6iPZHgaL9vZi1gaT44BnORRloZWZOWtCwA8MWepctzHorjhlRDmua+VDnQdy9wPPCH1uRSINw8PwEwkpesK1nhta78TbaCBmsM24qCbXJfFUYBZsNFv1pGuhLqgEy7Yn6Un/QUF3cXW60D3y/FdYCQ+yGtX9yz87Zsh0iyQemIE1IjnarbQne9+eJcCas+QpV9HGdjaBe3cUSId/ckIXc2jYbTm/tvIxc0E3H8+a27RgJGMCDYrVZxRq/9I8yHZOu4QVIwaF9NkkfcOgKHIoZWr8vQkXCbKEhoa8lJPdOA59QGdbNOdKjAyTjp8kCyqtYX6IvlhpVuHhB6YY5VpvSK7Q+K3fYUCit9UVC76yCW0gEk8OPus9AVqmNLwdqi6bBMLHGGPjlcog4aRDuJCNPDlwprPQ1K1hBjLtGwqZ7knTfCUzpKzHMfAvWxshW/6xYc9ZGmlzOr1OxmgIdB52RtYbVPqINM/Qr9bjGB7bqLrMFFmCvl+B8SOVgUTX1NZDnQ8R8WwJgNNxmY48rBA7yy9no4G6v92QRBn2pcfeJfrZGmcl6aQhybpDjDkJBMHFK2hj5dMf7qEBdFpe/OXBoHnkmw24xhnGdsfUogGQkHXmFQJMvOmwFWme64WhpVL4RH3E8T+dsfz1380=
install:
- cd $PROJECT_DIR
- travis_retry pip install --upgrade pip
- travis_retry pip install invoke==0.13.0
- travis_retry invoke requirements
jobs:
  include:
  - stage: Prod smoke tests (Chrome)
    if: branch = master
    env:
    - DOMAIN='prod'
    - PREFERRED_NODE='ra4bf'
    - TEST_BUILD='chrome'
    script: invoke test_travis_on_prod
  - stage: Prod smoke tests (Firefox)
    if: branch = master
    env:
    - DOMAIN='prod'
    - PREFERRED_NODE='ra4bf'
    - TEST_BUILD='firefox'
    script: invoke test_travis_on_prod
  - stage: Prod smoke tests (Edge)
    if: branch = master
    env:
    - DOMAIN='prod'
    - PREFERRED_NODE='ra4bf'
    - TEST_BUILD='edge'
    script: invoke test_travis_on_prod
  - stage: Staging tests part one
    if: branch != master
    env: TEST_BUILD='chrome'
    script: invoke test_travis_part_one
  -  # stage part one
    if: branch != master
    env: TEST_BUILD='firefox'
    script: invoke test_travis_part_one
  -  # stage part one
    if: branch != master
    env: TEST_BUILD='edge'
    script: invoke test_travis_part_one
  - stage: Staging tests part two
    if: branch != master
    env: TEST_BUILD='chrome'
    script: invoke test_travis_part_two
  -  # stage part two
    if: branch != master
    env: TEST_BUILD='firefox'
    script: invoke test_travis_part_two
  -  # stage part two
    if: branch != master
    env: TEST_BUILD='edge'
    script: invoke test_travis_part_two
